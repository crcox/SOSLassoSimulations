function [ bp ] = BaseProbability( permutations )
%UNTITLED2 Summary of this function goes here
%   Detailed explanation goes here

    regularization = unique({permutations.regularization});
    conditions = unique({permutations.condition});
    subject = num2cell(unique([permutations.subject]));
    [k,j,i] = ndgrid(1:numel(subject),1:numel(conditions),1:numel(regularization));
    bp = struct( ...
        'regularization', forcecolvec(regularization(i(:))), ...
        'condition', forcecolvec(conditions(j(:))), ...
        'subject', forcecolvec(subject(k(:))), ...
        'nvox', [], ...
        'baseprob', [], ...
        'median', []);
    for i = 1:numel(bp)
        z = strcmp({permutations.regularization}, bp(i).regularization) & ...
            strcmp({permutations.condition}, bp(i).condition) & ...
            [permutations.subject] == bp(i).subject;
        weights = cat(2,permutations(z).Wz)';
        bp(i).baseprob = mean(weights~=0);
        bp(i).median = median(weights);
        bp(i).nvox = size(weights, 2);
    end
end